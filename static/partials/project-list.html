<div>
  <h2>{{'PROJECT.PROJECTS' | translate}}</h2>

  <ol class="breadcrumb">
    <li class="active">{{'PROJECT.PROJECTS' | translate}}</li>
  </ol>

  <div tabset>
    <div tab heading="{{ 'ACTION.LIST' | translate }}" ng-controller="ProjectListController as ctrl">
      <div class="row">
        <nav class="col-sm-4 col-sm-offset-8 search-control">
          <form class="form-inline">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="{{'ACTION.SEARCH' | translate}}" ng-model="ctrl.query.name" />
              <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
            </div>
          </form>
        </nav>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th>#</th>
            <th>
              <a href ng-click="ctrl.predicate = 'name'">{{'PROJECT.ATTRIBUTES.NAME' | translate}}</a>
              (<a href ng-click="ctrl.predicate = '-name'">^</a>)
            </th>
            <th>
              <a href ng-click="ctrl.predicate = 'created_at'">{{'PROJECT.ATTRIBUTES.CREATED_AT' | translate}}</a>
              (<a href ng-click="ctrl.predicate = '-created_at'">^</a>)
            </th>
            <th>
              <a href ng-click="ctrl.predicate = 'updated_at'">{{'PROJECT.ATTRIBUTES.UPDATED_AT' | translate}}</a>
              (<a href ng-click="ctrl.predicate = '-updated_at'">^</a>)
            </th>
            <th>{{'ACTION.ACTION' | translate}}</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="project in ctrl.projects | filter:ctrl.query | orderBy:ctrl.predicate:ctrl.reverse | pager:ctrl.currentPage:ctrl.itemsPerPage">
            <td>{{$index + 1 + ctrl.itemsPerPage * (ctrl.currentPage - 1)}}</td>
            <td>{{project.name}}</td>
            <td>{{project.createdAt() | date}}</td>
            <td>{{project.updatedAt() | date}}</td>
            <td><a href="/#{{Url.projectUrl(project)}}">{{'ACTION.SHOW' | translate}}</a>
          </tr>
        </tbody>
      </table>
      <pagination total-items="ctrl.projects.length" page="ctrl.currentPage" items-per-page="ctrl.itemsPerPage"></pagination>
    </div>

    <div tab heading="{{'ACTION.NEW' | translate}}">
      <div ng-controller="ProjectCreateController as newProject">
        <form class="form-horizontal" ng-submit="newProject.submit()">
          <div class="form-group">
            <label class="col-sm-2 control-label" for="name">{{'PROJECT.ATTRIBUTES.NAME' | translate}}</label>
            <div class="col-sm-10">
              <input class="form-control" type="text" name="name" placeholder="{{'PROJECT.ATTRIBUTES.PLACEHOLDERS.NAME' | translate}}" ng-model="newProject.name"/>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label" for="note">{{'PROJECT.ATTRIBUTES.NOTE' | translate}}</label>
            <div class="col-sm-10">
              <textarea class="form-control" name="note" rows="3" placeholder="{{'PROJECT.ATTRIBUTES.PLACEHOLDERS.NOTE' | translate}}" ng-model="newProject.note"></textarea>
            </div>
          </div>

          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <input type="submit" class="btn btn-default" value="{{'ACTION.SUBMIT' | translate}}"/>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
